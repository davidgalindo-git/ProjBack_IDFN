-- MySQL Script generated by MySQL Workbench
-- Fri Nov  7 15:47:12 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema WhatTheDog
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `WhatTheDog` ;

-- -----------------------------------------------------
-- Schema WhatTheDog
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `WhatTheDog` ;
USE `WhatTheDog` ;

-- -----------------------------------------------------
-- Table `WhatTheDog`.`clients`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`clients` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`clients` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `lastname` VARCHAR(45) NULL,
  `firstname` VARCHAR(45) NULL,
  `genre` VARCHAR(1) NULL,
  `email` VARCHAR(45) NULL,
  `phone_number` VARCHAR(45) NULL,
  `address` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`races`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`races` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`races` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `category` VARCHAR(45) NULL,
  `morphotype` VARCHAR(45) NULL,
  `classification` VARCHAR(45) NULL,
  `min_male_size` INT NULL,
  `max_male_size` INT NULL,
  `min_female_size` INT NULL,
  `max_female_size` INT NULL,
  `min_male_weight` INT NULL,
  `max_male_weight` INT NULL,
  `min_female_weight` INT NULL,
  `max_female_weight` INT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`dogs`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`dogs` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`dogs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `sex` VARCHAR(1) NULL,
  `is_mixed` TINYINT NULL DEFAULT 0,
  `birthdate` DATE NULL,
  `is_sterilized` TINYINT NULL DEFAULT 0,
  `is_deceased` TINYINT NULL DEFAULT 0,
  `client_id` INT NOT NULL,
  `race_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Dogs_Clients_idx` (`client_id` ASC) VISIBLE,
  INDEX `fk_Dogs_Races1_idx` (`race_id` ASC) VISIBLE,
  CONSTRAINT `fk_Dogs_Clients`
    FOREIGN KEY (`client_id`)
    REFERENCES `WhatTheDog`.`clients` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Dogs_Races1`
    FOREIGN KEY (`race_id`)
    REFERENCES `WhatTheDog`.`races` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`diseases`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`diseases` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`diseases` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `description` VARCHAR(200) NULL,
  `symptoms` VARCHAR(100) NULL,
  `prevention_measure` VARCHAR(45) NULL,
  `treatment_method` VARCHAR(45) NULL,
  `is_vaccinatable` TINYINT NULL DEFAULT 0,
  `is_zoonotic` TINYINT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`locations`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`locations` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`locations` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `postal_code` VARCHAR(4) NULL,
  `postal_code_complement` VARCHAR(1) NULL,
  `toponym` VARCHAR(45) NULL,
  `canton_code` VARCHAR(2) NULL,
  `language_code` VARCHAR(3) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `canton_code_UNIQUE` (`canton_code` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`services`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`services` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`services` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NULL,
  `duration_m` INT NULL,
  `location_id` INT NOT NULL,
  `dog_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_Services_location1_idx` (`location_id` ASC) VISIBLE,
  INDEX `fk_services_dogs1_idx` (`dog_id` ASC) VISIBLE,
  CONSTRAINT `fk_Services_location1`
    FOREIGN KEY (`location_id`)
    REFERENCES `WhatTheDog`.`locations` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_services_dogs1`
    FOREIGN KEY (`dog_id`)
    REFERENCES `WhatTheDog`.`dogs` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `WhatTheDog`.`dogs_has_diseases`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `WhatTheDog`.`dogs_has_diseases` ;

CREATE TABLE IF NOT EXISTS `WhatTheDog`.`dogs_has_diseases` (
  `dog_id` INT NOT NULL,
  `disease_id` INT NOT NULL,
  PRIMARY KEY (`dog_id`, `disease_id`),
  INDEX `fk_dogs_has_diseases_diseases1_idx` (`disease_id` ASC) VISIBLE,
  INDEX `fk_dogs_has_diseases_dogs1_idx` (`dog_id` ASC) VISIBLE,
  CONSTRAINT `fk_dogs_has_diseases_dogs1`
    FOREIGN KEY (`dog_id`)
    REFERENCES `WhatTheDog`.`dogs` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_dogs_has_diseases_diseases1`
    FOREIGN KEY (`disease_id`)
    REFERENCES `WhatTheDog`.`diseases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Insert Data
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Insert Clients
-- -----------------------------------------------------
INSERT INTO WhatTheDog.clients (id, lastname, firstname, genre, email, phone_number, address)
VALUES
(1,'Smith','John','M','john.smith@email.com','+4123456789','Rue de la Paix 1'),
(2,'Doe','Jane','F','jane.doe@email.com','+4123456790','Rue Centrale 12'),
(3,'Martin','Paul','M','paul.martin@email.com','+4123456791','Rue du Lac 5'),
(4,'Lemoine','Sophie','F','sophie.lemoine@email.com','+4123456792','Rue de la Gare 8'),
(5,'Bernard','Luc','M','luc.bernard@email.com','+4123456793','Rue du Rh√¥ne 3');

-- -----------------------------------------------------
-- Insert Races
-- -----------------------------------------------------
INSERT INTO WhatTheDog.races (id, name, category, morphotype, classification, min_male_size, max_male_size, min_female_size, max_female_size, min_male_weight, max_male_weight, min_female_weight, max_female_weight)
VALUES
(1,'Labrador','Sporting','Mesomorph','Companion',55,62,53,59,25,36,22,32),
(2,'Border Collie','Herding','Mesomorph','Working',48,56,46,54,14,20,12,19),
(3,'Bulldog','Companion','Brachymorph','Companion',35,40,31,38,22,25,20,24),
(4,'German Shepherd','Working','Mesomorph','Working',60,65,55,60,30,40,25,35),
(5,'Poodle','Companion','Dolichomorph','Companion',45,60,40,55,20,30,18,28);

-- -----------------------------------------------------
-- Insert Diseases
-- -----------------------------------------------------
INSERT INTO WhatTheDog.diseases (id,name,description,symptoms,prevention_measure,treatment_method,is_vaccinatable,is_zoonotic)
VALUES
(1,'Rabies','Fatal viral infection','Aggression, hypersalivation','Vaccination','Supportive care',1,1),
(2,'Parvovirus','Contagious viral disease','Vomiting, diarrhea','Vaccination','Supportive care',1,0),
(3,'Distemper','Viral disease affecting respiratory and nervous systems','Coughing, seizures','Vaccination','Supportive care',1,0),
(4,'Leptospirosis','Bacterial disease','Fever, jaundice','Vaccination, hygiene','Antibiotics',1,1),
(5,'Allergy','Immune system reaction','Itching, skin rash','Avoid allergens','Medication',0,0);

-- -----------------------------------------------------
-- Insert Locations
-- -----------------------------------------------------
INSERT INTO WhatTheDog.locations (id, name, postal_code, postal_code_complement, toponym, canton_code, language_code)
VALUES
(1,'Clinic Lausanne','1000','A','Lausanne','VD','FR'),
(2,'Clinic Geneva','1200','B','Geneva','GE','FR'),
(3,'Clinic Zurich','8000','C','Zurich','ZH','DE'),
(4,'Clinic Bern','3000','D','Bern','BE','DE'),
(5,'Clinic Basel','4000','E','Basel','BS','DE');

-- -----------------------------------------------------
-- Insert Dogs (50 examples, varied)
-- -----------------------------------------------------
INSERT INTO WhatTheDog.dogs (id,name,sex,is_mixed,birthdate,is_sterilized,is_deceased,client_id,race_id)
VALUES
(1,'Max','M',0,'2018-05-10',1,0,1,1),
(2,'Bella','F',1,'2019-03-20',0,0,2,2),
(3,'Rocky','M',0,'2017-12-01',1,1,1,3),
(4,'Luna','F',1,'2020-07-15',0,0,3,1),
(5,'Charlie','M',0,'2016-11-30',1,1,4,4),
(6,'Daisy','F',0,'2018-01-25',1,0,5,2),
(7,'Buddy','M',1,'2019-09-05',0,0,2,5),
(8,'Molly','F',0,'2021-02-18',0,0,3,3),
(9,'Cooper','M',1,'2017-08-12',1,0,1,4),
(10,'Sadie','F',0,'2020-05-23',0,0,4,5),
(11,'Toby','M',0,'2018-11-30',1,0,5,1),
(12,'Ruby','F',1,'2019-06-14',0,0,1,2),
(13,'Zeus','M',0,'2017-03-09',1,1,2,3),
(14,'Lola','F',1,'2020-09-17',0,0,3,4),
(15,'Jack','M',0,'2016-12-25',1,1,4,5),
(16,'Lucy','F',0,'2018-04-04',1,0,5,1),
(17,'Bear','M',1,'2019-08-22',0,0,2,2),
(18,'Chloe','F',0,'2021-01-30',0,0,3,3),
(19,'Duke','M',1,'2017-10-05',1,0,1,4),
(20,'Lily','F',0,'2020-03-18',0,0,4,5),
(21,'Oliver','M',0,'2018-07-12',1,0,5,1),
(22,'Sophie','F',1,'2019-11-01',0,0,1,2),
(23,'Baxter','M',0,'2016-05-30',1,1,2,3),
(24,'Gracie','F',1,'2020-08-22',0,0,3,4),
(25,'Henry','M',0,'2017-01-15',1,0,4,5),
(26,'Emma','F',0,'2018-10-10',1,0,5,1),
(27,'Leo','M',1,'2019-02-20',0,0,2,2),
(28,'Nala','F',0,'2021-07-05',0,0,3,3),
(29,'Milo','M',0,'2017-06-14',1,0,1,4),
(30,'Zoey','F',1,'2020-12-01',0,0,4,5),
(31,'Finn','M',0,'2018-08-30',1,0,5,1),
(32,'Ruby','F',0,'2019-05-20',0,0,1,2),
(33,'Teddy','M',1,'2017-11-12',1,1,2,3),
(34,'Lily','F',0,'2020-06-14',0,0,3,4),
(35,'Oscar','M',0,'2016-09-25',1,0,4,5),
(36,'Coco','F',1,'2018-02-18',0,0,5,1),
(37,'Bentley','M',0,'2019-07-08',1,0,2,2),
(38,'Sasha','F',1,'2021-03-25',0,0,3,3),
(39,'Riley','M',0,'2017-04-12',1,1,1,4),
(40,'Mia','F',0,'2020-11-05',0,0,4,5),
(41,'Archie','M',1,'2018-12-22',1,0,5,1),
(42,'Luna','F',0,'2019-09-30',0,0,1,2),
(43,'Bruno','M',0,'2017-01-02',1,1,2,3),
(44,'Zoey','F',1,'2020-05-18',0,0,3,4),
(45,'Gus','M',0,'2016-08-10',1,0,4,5),
(46,'Maggie','F',0,'2018-03-14',1,0,5,1),
(47,'Murphy','M',1,'2019-10-01',0,0,2,2),
(48,'Lilly','F',0,'2021-01-12',0,0,3,3),
(49,'Shadow','M',0,'2017-07-20',1,1,1,4),
(50,'Daisy','F',1,'2020-04-07',0,0,4,5);

-- -----------------------------------------------------
-- Insert Services
-- -----------------------------------------------------
INSERT INTO WhatTheDog.services (id, date, duration_m, location_id, dog_id)
VALUES
(1,'2025-01-10 10:00:00',60,1,1),
(2,'2025-01-10 11:00:00',45,2,2),
(3,'2025-01-11 09:30:00',30,3,3),
(4,'2025-01-11 14:00:00',60,4,4),
(5,'2025-01-12 10:00:00',90,5,5),
(6,'2025-01-12 11:30:00',45,1,6),
-- ... continue for all 50 dogs
(50,'2025-02-15 15:00:00',60,5,50);

-- -----------------------------------------------------
-- Assign Diseases to Dogs (many-to-many)
-- -----------------------------------------------------
INSERT INTO WhatTheDog.dogs_has_diseases (dog_id, disease_id)
VALUES
(1,1),(1,2),(2,2),(2,5),(3,1),(3,3),(4,4),(5,1),
(6,5),(7,2),(7,3),(8,5),(9,1),(10,2),(11,3),(12,4),
(13,1),(14,5),(15,2),(16,3),(17,4),(18,5),(19,1),
(20,2),(21,3),(22,4),(23,1),(24,5),(25,2),(26,3),
(27,4),(28,5),(29,1),(30,2),(31,3),(32,4),(33,1),
(34,5),(35,2),(36,3),(37,4),(38,5),(39,1),(40,2),
(41,3),(42,4),(43,1),(44,5),(45,2),(46,3),(47,4),
(48,5),(49,1),(50,2);
